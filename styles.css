@font-face {
    font-family: "myfont";
    /*任意のフォントファミリー名でOK*/
    src: url("source/larabief.ttf") format("truetype");
    /*fontがあるパスを書いて、formatを指定*/
    font-display: swap;
    /*ダウンロード状況に応じてフォントの表示を変える
(「swap」はWebフォントが読み込まれるまでフォールバックフォントで表示し、読み込まれた時点で置き換えます。)*/
}

/* Background layer that can be rotated independently from content */
body::before {
    content: "";
    position: fixed;
    inset: 0;
    background-image: url("source/background.png");
    background-repeat: no-repeat;
    background-position: center center;
    /* use vw-based size so we can calculate the image height in CSS */
    background-size: var(--bg-size, 95vw);
    transform-origin: center center;
    will-change: transform, filter;
    pointer-events: none;
    z-index: -1;
    opacity: 0.98;
    filter: hue-rotate(0deg);
    animation: tilt 8s ease-in-out infinite, hueShift var(--hue-duration) linear infinite;
}

:root {
    --bg: #000002;
    --card: #ffffff;
    --accent: #2563eb;
    --text: #ffffff;
    --hue-duration: 20s;
    /* helpers: adjust these to match your background image and desired offset */
    --bg-size: 95vw;       /* width of background image (can be % or vw) */
    --bg-aspect: 0.5625;   /* image height / width (default 16:9 = 9/16 = 0.5625) */
    --header-offset-extra: 2vh; /* extra spacing to push header further down */
        /* text glow settings (strengthened) */
        --text-glow-color: 255,50,50; /* rgb of the blue glow (Tailwind blue-500) */
        --text-glow-alpha: 0.90;      /* glow opacity (was 0.99) */
        --text-glow-blur: 36px;       /* blur radius (was 36px) */
}

html{
    height: 100%;
    background-color: var(--bg);
}

body{
    height: 100%;
    margin: 0;
    font-family: "myfont", sans-serif;
    background-color: transparent; /* allow body::before to be visible */
    color: var(--text);
}

@keyframes tilt {
    0% {
        transform: rotate(2deg);
    }

    25% {
        transform: rotate(0deg);
    }

    50% {
        transform: rotate(-2deg);
    }

    75% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(2deg);
    }
}

.container {
    max-width: 720px;
    margin: 1vh auto;
    /* push the content down so it sits below the top edge of the background image */
    padding-top: calc((100vh - (var(--bg-size) * var(--bg-aspect))) / 2 + var(--header-offset-extra));
    padding-right: 2rem;
    padding-left: 2rem;
    padding-bottom: 2rem;
    text-align: center;
}

/* Intro overlay */
#intro{
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    pointer-events: none;
}

.intro-bg{
    position: absolute;
    inset: 0;
    background: #000;
    opacity: 1;
    transition: opacity 1s ease;
}

.intro-logo{
    position: relative;
    width: 40%;
    max-width: 420px;
    opacity: 0;
    transform: scale(1.02);
    /* match background fade duration and easing */
    transition: opacity 1s ease, transform 1s ease;
}

/* states applied by JS */
#intro.logo-visible .intro-logo{ opacity: 1.0; }
#intro.bg-fade-out .intro-bg{ opacity: 0; }
#intro.logo-fade-out .intro-logo{ opacity: 0; }

#message.active {
    color: var(--accent);
    font-weight: 600
}

#synthesis {
    font-size: 2.25rem;
    margin: 0;
    text-decoration: none; /* remove underline */
    color: inherit;        /* keep page text color */
    display: inline-block; /* allow margin/padding if needed */
}

/* Ensure anchor states don't reintroduce underlines and keep accessible focus */
a#synthesis,
a#synthesis:visited,
a#synthesis:hover,
a#synthesis:active {
    text-decoration: none;
    color: inherit;
}
a#synthesis:focus{
    outline: 3px solid rgba(37,99,235,0.25);
    outline-offset: 3px;
}

.countdown {
    margin-top: 0.5rem;
    font-size: 0.95rem;
    font-weight: 700;
}

/* Global blue blurred layer under text: applies to common text elements */
/* Uses rgba with the rgb components so we can change alpha separately */
body,
h1,h2,h3,h4,h5,h6,
p,a,span,strong,em,li,button,label,blockquote,code,pre {
    /* stronger multilayer text glow */
    text-shadow:
        0 8px 16px rgba(var(--text-glow-color), calc(var(--text-glow-alpha) * 1.0)),
        0 0 36px rgba(var(--text-glow-color), calc(var(--text-glow-alpha) * 0.6)),
        0 0 72px rgba(var(--text-glow-color), calc(var(--text-glow-alpha) * 0.35));
}

@keyframes hueShift {
  0% { filter: hue-rotate(20deg); } /* 赤 */
/*  16.66% { filter: hue-rotate(270deg); }  紫 (赤から-90度、または+270度) 
  33.32% { filter: hue-rotate(240deg); }  青 (赤から-120度、または+240度) 
  49.98% { filter: hue-rotate(180deg); }  水色 (赤から-180度、または+180度) 
  66.64% { filter: hue-rotate(60deg); }  黄色 (赤から+60度) 
  83.33% { filter: hue-rotate(0deg); }  赤 (元の色) */
  50% { filter: hue-rotate(-70deg); }
  100% { filter: hue-rotate(20deg); }
}
/* Header-specific glow (uses data-glow attribute set by JS) */
header { position: relative; }
.has-glow { position: relative; z-index: 1; }
.has-glow::before{
    content: attr(data-glow);
    position: absolute;
    left: 0; top: 0; right: 0; bottom: 0;
    z-index: 0;
    pointer-events: none;
    color: rgba(var(--text-glow-color), var(--text-glow-alpha, 0.6));
    opacity: 0.95;
    filter: blur(var(--text-glow-blur, 18px));
    mix-blend-mode: screen;
    white-space: pre-wrap;
    display: block;
    transform-origin: left top;
    animation: hueShift var(--hue-duration) linear infinite;
}
